# add max/min columns for input definitions mostly used for float/int inputs
# add dr2 filter user input for array imputation pipeline

databaseChangeLog:
  -  changeSet:
       id:  add max/min columns for input definitions and dr2 filter user input for array imputation pipeline
       author:  js
       changes:
         - addColumn:
             columns:
               - column:
                   name: min_value
                   type: double precision
                   constraints:
                     nullable: true
             tableName: pipeline_input_definitions
         -  addColumn:
              columns:
                -  column:
                     name:  max_value
                     type:  double precision
                     constraints:
                       nullable: true
              tableName:  pipeline_input_definitions
         - insert:
             tableName: pipeline_input_definitions
             columns:
               - column:
                   name: pipeline_id
                   valueComputed: (SELECT id FROM pipelines WHERE name='array_imputation' and version=1)
               - column:
                   name: name
                   value: minDr2ForInclusion
               - column:
                   name: type
                   value: FLOAT
               - column:
                   name: is_required
                   value: false
               - column:
                   name: user_provided
                   value: true
               - column:
                   name: default_value
                   value: 0.0
               - column:
                   name: min_value
                   value: 0.0
               - column:
                   name: max_value
                   value: 1.0
               - column:
                   name: wdl_variable_name
                   value: min_dr2_for_inclusion
